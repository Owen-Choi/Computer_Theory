네트워크 레이어는 기본적으로 어떤 패킷을 목적지까지 잘 전달하는 역할을 수행하는 계층이다.

목적지까지 가기 위한 경로를 찾아주는 기능도 수행을 하고, 그게 라우팅 프로토콜이라는 부분이다. 
그 라우팅 프로토콜은 패킷의 헤더 정보를 사용해서 목적지를 찾는데, 그 헤더 정보는 IP protocol이다. (IP가 지켜야 하는 규약.)
이 아이피 프로토콜을 기반으로 정보들이 처리된다.
그리고 라우팅 프로토콜이 잘 동작을 하려면 네트워크 레이어의 정보들을 다루는 네트워크 장비들 끼리 정보교환을 해줘야 하는 부분이 있다.
ICMP 프로토콜이 이 부분을 다룬다. 
그리고 네트워크 레이어에서 구현한 기술들이 하드웨어 레벨에서 하드코딩돼서 동작을 했는데, 네트워크 레이어에서 동작하는 장비들을
소프트웨어 기반으로 사용자의 의도에 맞게 바꿀 수 있는 기능을 제공하는 것이 SDN(Software Defined Networking)이다. 

Network layer
	
	한 어플리케이션이 다른 어플리케이션으로 인터넷을 껴서 문자를 보내고 싶다면 소켓이라는 인터페이스를 통해서
	운영체계에게 메세지를 위탁을 한다. 그 메세지가 운영체제에게 가면 그때부터 Transport layer로 갔다고 생각을 한다. 
	TCP를 쓰면 transport layer에서 tcp 프로토콜에 맞춰서 이 메세지가 가공이 된다. 길이에 따라 tcp는 길이를 자르고 
	혹시 모를 패킷 유실이나 순서 엉킴이 있더라도 복구할 수 있게 부가 정보를 헤더에 집어넣는다. 이런 것을 통틀어 가공이라고 하고
	이 가공된 정보의 한 덩어리 덩어리를 transport layer에서는 segment라고 부른다. 동일한 메시지 부분 덩어리를
	계층별로 가공하고 그 가공한 데이터 블럭을 부르는 이름이 각각 다르다. 
	호스트 본인의 IP주소를 source로, 출발지로 설정하고 보내고자 하는 IP주소를 destination address로 설정해서 헤더 부분에 추가하고 
	밑의 레이어로 내려서 라우터쪽으로 가게 만들어주는 행동을 한다. 

	network layer에서 가공된 데이터는 datagram이라고 한다. (encapsulates segment)
	즉 transport layer에서 가공된 segment를 network layer에서 한번 더 가공한 것을 datagram이라고 한다. 
	각 계층에서 가공을 할 때마다 계층 고유의? 헤더를 추가해준다. 
	
	라우터들은 transport layer의 segment는 보지 않고 network layer의 datagram에 해당하는 정보만 쏙쏙 뽑아 쓴다고 한다. 
	그림을 보면 양 끝에는 계층이 5개지만 중간의 라우터들은 계층이 3개밖에 없다.  그 이유는 다음과 같다.
	제일 끝 부분, 계층이 5개인 부분의 패킷은 (네트워크 헤더) || (트랜스포트 헤더) || (어플리케이션의 전달정보) 이렇게 구성이 돼있다.
	중간의 라우터들이 계층이 3개인 이유는 위의 패킷에서 네트워크 헤더와  어플리케이션의 정보만을 뽑아 처리하기 때문이다.
	그렇기에 라우터들을 네트워크 레이어의 장비라고 부르기도 한다. 
	
	물론 실질적으로는 따로 보는게 아니라 다 같이 보고 원하는 정보가 아니면 신경을 안쓰는(= 버리는) 구조라고 한다. 참고.
	

	네트워크 레이어에서 수행되고 있는 중요한 2개의 기능이 있다.
	routing과 forwarding이다.
		routing : 어떤 destination ip를 가진 host로 가기 위해서 길을 찾아주는 역할.
		forwarding : 정해진 길로 따라가기 위해서 중간중간 선택지가 나오면 어떤 선택지로 패킷들이 나가야 하는지를 라우터 단위로
				결정해주는 것
		라우팅 알고리즘에 의해서 라우팅 정보가 만들어지면 그 정보를 실행하기 위해서 라우터 단위에서 어떤 패킷이 도착했을 때
		그 패킷의 목적지 주소를 기반으로 몇번 링크로 내보내야 되는 지 판단하는 forwarding table을 생성되게 했다고 보면 된다.
		==> 주체가 어떻게 되지? 주체는 라우팅 알고리즘인 것 같다. 즉 라우팅 알고리즘이 특정한 목적지 주소를 가기 위해서 
			특정 라우터 상에서는 몇번 링크로 내보내야 될지에 대해서 글로벌하게 정책을 결정한다?
		in ppt : 
			routing algorithm determines end-end-path through network, 즉 라우팅 알고리즘이 일단 목적지(끝과 끝)을 
			결정하면 forwarding table은 "local", 즉 라우터 단위에서 어디로 갈 지를 정해준다. 
	
		쉬운 얘기를 너무 복잡하게 하시네.